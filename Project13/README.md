# 实现方式
ECMH(Elliptic curve MultiSet Hash)是一种哈希函数，它的特点是可以把多个数据的 hash 合并到一个 hash 中，还可以支持删除。该哈希函数的基本思想是将集合或多重集合中的每个元素映射到椭圆曲线上的一个点。  
$$hash({a}) + hash({b}) = hash({a,b})$$
哈希函数满足两个多重集合的哈希值之和等于它们的并集的哈希值。空集的哈希值是椭圆曲线上的无穷远点。  
要向多重集合添加一个元素，需要计算该元素的哈希值，并将相应的椭圆曲线上的点加到现有的哈希值上。同样，要从多重集合中删除元素，需要计算该元素的哈希值，并从现有的哈希值中减去相应的椭圆曲线上的点。多重集合中元素的顺序不重要，重复元素是可能的，会导致不同的摘要值。  
更新多重集合的摘要值只需要计算旧的和新的多重集合之间的差异，从而实现了在分布式系统中快速同步节点的方法。  
**以下是对几个函数的说明：**  
`Legendre_symbol(a, p)`：该函数使用欧拉准则计算a和p的勒让德符号，以确定a是否对模p为二次剩余。如果a是二次剩余，则返回1，如果不是，则返回-1，如果a可被p整除，则返回0。  
`modular_sqrt(a, p)`：该函数使用 $Tonelli-Shanks$ 算法计算a模p的模平方根， $Tonelli-Shanks$ 算法是一种用于在质数模下找到平方根的方法。如果a在模p下不是二次剩余，则返回None。
`elliptic_curve_hash(u)`：该函数接受一个输入u，并通过查找距离从u计算的哈希值最近的曲线上的点(x，y)来计算椭圆曲线哈希。该函数使用暴力搜索可能的x值来找到二次剩余d，使得 $y^2 = d$ 在模p下有解。如果存在这样的解，则函数返回点 $(x，y)$ 。否则，返回None。
`elliptic_curve_hash_set(s)`：该函数接受一个输入集合s，并计算其相应椭圆曲线哈希的总和。它通过迭代s的元素，对每个元素调用`elliptic_curve_hash`函数，并将生成的点(x，y)分别进行组件相加。该函数将结果的总和作为列表 $[x_sum，y_sum]$ 返回。

# 实现效果
<div align="center">
  <img src="https://github.com/Ljm200301/ljm/blob/main/pictures/ECMH.png">
</div>
