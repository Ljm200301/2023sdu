# report on the application of this deduce technique in Ethereum with ECDSA
## ECDSA简介
	  ECDSA（Elliptic Curve Digital Signature Algorithm，椭圆曲线数字签名算法）是一种基于椭圆曲线密码学的数字签名算法。$ECDSA$ 的安全性基于椭圆曲线离散对数问题，与普通的离散对数问题（DLP）和大数分解问题（IFP）不同，椭圆曲线离散对数问题没有亚指数时间的解决方法。因此椭圆曲线密码的单位比特强度要高于其他公钥体制。   
假设私钥为 $d$，公钥为 $Q$，消息的哈希值为 $H$，随机数为 $k$， $k$ 的逆元为 $k^{-1}$，椭圆曲线参数为 $a$、 $b$ 和 $p$。  
签名过程：  
（1）计算 $kG$ 的 $x$ 坐标，即 $r = x(kG) \bmod p$，其中 $G$ 是椭圆曲线上的基点。  
（2）计算 $s = k^{-1}(H + dr) \bmod p$。  
（3）得到签名 $(r, s)$。  
验证过程：  
（1）计算 $w = s^{-1} \bmod p$。  
（2）计算 $u_1 = Hw \bmod p$ 和 $u_2 = rw \bmod p$。  
（3）计算点 $P = u_1G + u_2Q$。  
（4）如果 $P$ 的 $x$ 坐标等于 $r$，则认为签名是有效的，否则认为签名是无效的。  
## Recover public key from signature
### 恢复方法
从签名中恢复公钥是区块链系统（例如以太坊）中的一种有用技术，其中使用 ECDSA 签名对交易进行签名。在传统的 ECDSA 签名中，公钥不包含在签名的消息中，这意味着需要使用签名和消息哈希来恢复公钥。要从 ECDSA 签名中恢复公钥，可以执行以下步骤：  
从签名 $(r, s)$ 中计算出 $r$ 和 $s$ 的值。  
计算签名的消息哈希 $H$。
使用 $r$、 $s$ 和 $H$ 的值来计算公钥 $Q$ 的值。这可以使用以下公式完成：

$$
\begin{align*}
Q &= r^{-1}(sP-eG)\\
&=r^{-1}(k^{-1}(e+dr)kG-eG)\\
&=r^{-1}((e+dr)G-eG)\\
&=dG
\end{align*}
$$

其中，$G$ 是椭圆曲线的基点， $Q_a$ 是用于签名消息的私钥关联的公钥，$\cdot$ 表示曲线上的点乘法。  
### 应用
一旦恢复了公钥 $Q$，它可以用于验证签名并确保签名的消息的真实性和完整性。  
发送不附带公钥的交易可以提高区块链系统的效率和安全性。通过不在交易数据中包含公钥，可以减少交易的大小，从而提高区块链网络的整体性能。  
此外，通过允许从签名中恢复公钥，可以提高交易的隐私性。公钥可以保持私有，并仅在签名验证时必要时才公开，这可以帮助防止未经授权访问交易数据。  
总之，从签名中恢复公钥和发送不附带公钥的交易是可以提高区块链系统效率和安全性的重要技术。
